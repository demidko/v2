## v2
Эксперимент по эффективному сжатию и декомпрессии url-ов из access-логов.

### Мотивация:
Access-логи занимают очень много места (~30гб/файл) даже при эффективном сжатии.

### Цель:
Текущий эксперимент по результатам сравнения скорости декомпрессии предварительно обработанных url-ов, должен был показать, что лучше использовать для оптимизации хранения логов, своё решение на C++ или ClickHouse.

## Результат:
Занимаемый объем данных оказался примерно равен с ClickHouse, а по скорости утилита проигрывает примерно в три раза.

### Использованный алгоритм сжатия:
1. Для упрощения эксперимента отбрасываем из записей все, кроме пути из url.
1. Сопоставляем каждому уникальному терму из путей свой уникальный id. Чем чаще повторяется терм, тем меньше его id.
1. Кодируем получившиеся из каждого пути последовательности цифр с помощью variable int encoding (старший бит хранит знание, является ли байт последним в числе).

### Как собирать?
Нам понадобится система сборки `cmake` и менеджер библиотек [`vcpkg`](https://github.com/microsoft/vcpkg). Их легко можно установить пакетным менеджером, например `brew`.
1. Устанавливаем фреймворк для тестирования:  
`vcpkg install catch2`
1. Устанавливаем зависимость для парсинга аргументов командной строки:  
`vcpkg install cli11`
1. Подготавливаем проект для сборки с использованием зависимостей `vcpkg`:  
```cmake `vcpkg integrate install | tail -1 |  cut -d \" -f2` -DCMAKE_BUILD_TYPE=Release -G "Unix Makefiles" -B cmake-build-release```
1. Собираем проект и тесты:  
`cmake --build cmake-build-release --target all`  
После этого в директории `cmake-build-release` основная self-executable утилита появится под именем `v2`.  
Тесты можно выполнить запустив расположенный рядом файл `test`.  

### Как запускать?
Утилита поддерживает опции командной строки, например `./v2 --help`

### Ограничения:
Утилита не может обрабатывать логи длинной более чем 4'294'967'295 строк.

### Code conventions:
Каждый `*.h` файл должен содержать в глобальном пространстве имен только одну сущность.  
Все содержимое должно быть вложено в нее и не находиться снаружи.  
Название этой сущности должно совпадать с именем файла.  